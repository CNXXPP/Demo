<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.great.dao.TrainerMapper">
  <resultMap id="BaseResultMap" type="com.great.entity.Trainer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    <id column="TRA_UUID" jdbcType="VARCHAR" property="traUuid" />
    <result column="SCH_UUID" jdbcType="VARCHAR" property="schUuid" />
    <result column="TRA_ID" jdbcType="DECIMAL" property="traId" />
    <result column="TRA_NAME" jdbcType="VARCHAR" property="traName" />
    <result column="TRA_PWD" jdbcType="VARCHAR" property="traPwd" />
    <result column="TRA_GENDER" jdbcType="VARCHAR" property="traGender" />
    <result column="TRA_AGE" jdbcType="DECIMAL" property="traAge" />
    <result column="TRA_PHONE" jdbcType="VARCHAR" property="traPhone" />
    <result column="TRA_INTRO" jdbcType="VARCHAR" property="traIntro" />
    <result column="TRA_SCORE" jdbcType="DECIMAL" property="traScore" />
    <result column="TRA_HIRE_DATE" jdbcType="TIMESTAMP" property="traHireDate" />
    <result column="DRIVING_TYPE" jdbcType="VARCHAR" property="drivingType" />
    <result column="LAST_LOGIN_DATE" jdbcType="TIMESTAMP" property="lastLoginDate" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    TRA_UUID, SCH_UUID, TRA_ID, TRA_NAME, TRA_PWD, TRA_GENDER, TRA_AGE, TRA_PHONE, TRA_INTRO, 
    TRA_SCORE, TRA_HIRE_DATE, DRIVING_TYPE, LAST_LOGIN_DATE
  </sql>
  <select id="selectByPrimaryKey" parameterType="java.lang.String" resultMap="BaseResultMap">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from TRAINER
    where TRA_UUID = #{traUuid,jdbcType=VARCHAR}
  </select>
  
   <select id="getAllTrainers"  parameterType="com.great.entity.Trainer" resultMap="BaseResultMap">
      SELECT * FROM TRAINER where SCH_UUID = #{schUuid,jdbcType=VARCHAR}
  </select>
  
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    delete from TRAINER
    where TRA_UUID = #{traUuid,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.great.entity.Trainer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    insert into TRAINER (TRA_UUID, SCH_UUID, TRA_ID, 
      TRA_NAME, TRA_PWD, TRA_GENDER, 
      TRA_AGE, TRA_PHONE, TRA_INTRO, 
      TRA_SCORE, TRA_HIRE_DATE, DRIVING_TYPE, 
      LAST_LOGIN_DATE)
    values (#{traUuid,jdbcType=VARCHAR}, #{schUuid,jdbcType=VARCHAR}, SEQ.NEXTVAL, 
      #{traName,jdbcType=VARCHAR}, #{traPwd,jdbcType=VARCHAR}, #{traGender,jdbcType=VARCHAR}, 
      #{traAge,jdbcType=DECIMAL}, #{traPhone,jdbcType=VARCHAR}, #{traIntro,jdbcType=VARCHAR}, 
      #{traScore,jdbcType=DECIMAL}, #{traHireDate,jdbcType=TIMESTAMP}, #{drivingType,jdbcType=VARCHAR}, 
      #{lastLoginDate,jdbcType=TIMESTAMP})
  </insert>
  <insert id="insertSelective" parameterType="com.great.entity.Trainer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    insert into TRAINER
    <trim prefix="(" suffix=")" suffixOverrides=",">
      <if test="traUuid != null">
        TRA_UUID,
      </if>
      <if test="schUuid != null">
        SCH_UUID,
      </if>
      <if test="traId != null">
        TRA_ID,
      </if>
      <if test="traName != null">
        TRA_NAME,
      </if>
      <if test="traPwd != null">
        TRA_PWD,
      </if>
      <if test="traGender != null">
        TRA_GENDER,
      </if>
      <if test="traAge != null">
        TRA_AGE,
      </if>
      <if test="traPhone != null">
        TRA_PHONE,
      </if>
      <if test="traIntro != null">
        TRA_INTRO,
      </if>
      <if test="traScore != null">
        TRA_SCORE,
      </if>
      <if test="traHireDate != null">
        TRA_HIRE_DATE,
      </if>
      <if test="drivingType != null">
        DRIVING_TYPE,
      </if>
      <if test="lastLoginDate != null">
        LAST_LOGIN_DATE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides=",">
      <if test="traUuid != null">
        #{traUuid,jdbcType=VARCHAR},
      </if>
      <if test="schUuid != null">
        #{schUuid,jdbcType=VARCHAR},
      </if>
      <if test="traId != null">
        #{traId,jdbcType=DECIMAL},
      </if>
      <if test="traName != null">
        #{traName,jdbcType=VARCHAR},
      </if>
      <if test="traPwd != null">
        #{traPwd,jdbcType=VARCHAR},
      </if>
      <if test="traGender != null">
        #{traGender,jdbcType=VARCHAR},
      </if>
      <if test="traAge != null">
        #{traAge,jdbcType=DECIMAL},
      </if>
      <if test="traPhone != null">
        #{traPhone,jdbcType=VARCHAR},
      </if>
      <if test="traIntro != null">
        #{traIntro,jdbcType=VARCHAR},
      </if>
      <if test="traScore != null">
        #{traScore,jdbcType=DECIMAL},
      </if>
      <if test="traHireDate != null">
        #{traHireDate,jdbcType=TIMESTAMP},
      </if>
      <if test="drivingType != null">
        #{drivingType,jdbcType=VARCHAR},
      </if>
      <if test="lastLoginDate != null">
        #{lastLoginDate,jdbcType=TIMESTAMP},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.great.entity.Trainer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    update TRAINER
    <set>
      <if test="schUuid != null">
        SCH_UUID = #{schUuid,jdbcType=VARCHAR},
      </if>
      <if test="traId != null">
        TRA_ID = #{traId,jdbcType=DECIMAL},
      </if>
      <if test="traName != null">
        TRA_NAME = #{traName,jdbcType=VARCHAR},
      </if>
      <if test="traPwd != null">
        TRA_PWD = #{traPwd,jdbcType=VARCHAR},
      </if>
      <if test="traGender != null">
        TRA_GENDER = #{traGender,jdbcType=VARCHAR},
      </if>
      <if test="traAge != null">
        TRA_AGE = #{traAge,jdbcType=DECIMAL},
      </if>
      <if test="traPhone != null">
        TRA_PHONE = #{traPhone,jdbcType=VARCHAR},
      </if>
      <if test="traIntro != null">
        TRA_INTRO = #{traIntro,jdbcType=VARCHAR},
      </if>
      <if test="traScore != null">
        TRA_SCORE = #{traScore,jdbcType=DECIMAL},
      </if>
      <if test="traHireDate != null">
        TRA_HIRE_DATE = #{traHireDate,jdbcType=TIMESTAMP},
      </if>
      <if test="drivingType != null">
        DRIVING_TYPE = #{drivingType,jdbcType=VARCHAR},
      </if>
      <if test="lastLoginDate != null">
        LAST_LOGIN_DATE = #{lastLoginDate,jdbcType=TIMESTAMP},
      </if>
    </set>
    where TRA_UUID = #{traUuid,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.great.entity.Trainer">
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Tue Sep 26 17:46:16 CST 2017.
    -->
    update TRAINER
    set SCH_UUID = #{schUuid,jdbcType=VARCHAR},
      TRA_ID = #{traId,jdbcType=DECIMAL},
      TRA_NAME = #{traName,jdbcType=VARCHAR},
      TRA_PWD = #{traPwd,jdbcType=VARCHAR},
      TRA_GENDER = #{traGender,jdbcType=VARCHAR},
      TRA_AGE = #{traAge,jdbcType=DECIMAL},
      TRA_PHONE = #{traPhone,jdbcType=VARCHAR},
      TRA_INTRO = #{traIntro,jdbcType=VARCHAR},
      TRA_SCORE = #{traScore,jdbcType=DECIMAL},
      TRA_HIRE_DATE = #{traHireDate,jdbcType=TIMESTAMP},
      DRIVING_TYPE = #{drivingType,jdbcType=VARCHAR},
      LAST_LOGIN_DATE = #{lastLoginDate,jdbcType=TIMESTAMP}
    where TRA_UUID = #{traUuid,jdbcType=VARCHAR}
  </update>
  
  <select id="loginVerify" resultMap="BaseResultMap" parameterType="com.great.entity.Trainer">
      select 
      <include refid="Base_Column_List" />
       from TRAINER where TRA_ID=#{traId} and TRA_PWD=#{traPwd}  
  </select>
    
   <update id="updateLoginTime" parameterType="com.great.entity.Trainer">   
    update TRAINER set LAST_LOGIN_DATE=sysdate  where TRA_ID=#{traId}
   </update> 
   
   <select id="selectTrainer" parameterType="com.great.entity.VerifyPwd" resultMap="BaseResultMap">    
    select * from TRAINER where TRA_ID=#{id} and TRA_PWD=#{pwd}
   </select>
   
   <update id="updateTrainerPwd" parameterType="com.great.entity.VerifyPwd">
   update TRAINER set TRA_PWD=#{pwd}  where TRA_ID=#{id}
  
   </update>
   
   <!-- 更新教练评分 -->
  <update id="updateTrainerScore" parameterType="java.util.Map">  
   update trainer set tra_score=#{score} where tra_uuid=(select tra_uuid from trainer_stu where stu_uuid=#{stuUuid})
  </update>
   
   <select id="getTrainersBySchUuid" resultMap="BaseResultMap" parameterType="java.lang.String">
      select 
      <include refid="Base_Column_List" />
       from TRAINER where SCH_UUID=#{schUuid}  
  </select>
   
</mapper>